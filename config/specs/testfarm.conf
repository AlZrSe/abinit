# -*- INI -*-
#
# Copyright (C) 2009-2016 ABINIT Group (Yann Pouillon)
#
# This file is part of the ABINIT software package. For license information,
# please see the COPYING file in the top-level directory of the ABINIT source
# distribution.
#

#
# Config file to generate build config files for the ABINIT test farm
#
# Note: The following statements are in the Python "INI" format, with
#       case-sensitivity activated.
#

#
# File format:
#
#   * each section is the name assigned to a Buildbot slave;
#   * the contents of each section are valid options of the build system
#     (see options.conf for details);
#   * the 'status' option tells whether the config file has been
#     validated and certified by a maintainer of Abinit.
#

# WARNING: modify the defaults with *extreme* care!
[DEFAULT]
status = certified
enable_maintainer_checks = no
enable_memory_profiling = no
with_dft_flavor = atompaw+bigdft+libxc+wannier90
with_linalg_flavor = none
with_trio_flavor = netcdf

###########################################################
#      NIGHTLY BUILDERS
###########################################################

###########################################################
# ABIREF ( CentOS 7) : REF

# reference
[abiref_gnu_5.3_libxc]

FCFLAGS_EXTRA = -O2 -g -Wall -Wno-maybe-uninitialized -ffpe-trap=invalid,zero,overflow -fbacktrace -pedantic -fcheck=all
enable_mpi = no
enable_mpi_io = yes

with_trio_flavor = netcdf
with_netcdf_incs = -I/usr/local/fallbacks/gnu/5.3/serial/include
with_netcdf_libs = -L/usr/local/fallbacks/gnu/5.3/serial/lib -lnetcdf

with_dft_flavor = atompaw+libxc

#with_atompaw_bins = /usr/local/fallbacks/gnu/5.3/serial/bin
#with_atompaw_incs = -I/usr/local/fallbacks/gnu/5.3/serial/include
#with_atompaw_libs = -L/usr/local/fallbacks/gnu/5.3/serial/lib -latompaw
#with_libxc_incs = -I/usr/local/fallbacks/gnu/5.3/serial/include
#with_libxc_libs = -L/usr/local/fallbacks/gnu/5.3/serial/lib -lxcf90 -lxc
#with_fallbacks_prefix = /usr/local/fallbacks/gnu/5.3/serial

with_fft_flavor = fftw3
with_fft_incs = -I/usr/include
with_fft_libs = -L/usr/lib64 -lfftw3 -lfftw3f
# OpenBLAS
with_linalg_flavor = custom
with_linalg_libs = -L/usr/local/OpenBLAS/lib -lopenblas -lpthread
enable_gw_dpc = yes
status = certified


[atlas_intel_18.0_openmpi]
enable_mpi = yes
enable_mpi_io = yes
with_mpi_prefix = ${MPI_HOME}

with_linalg_flavor = mkl
with_linalg_incs = -I${MKLROOT}/include
with_linalg_libs = -L${MKLROOT}/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl
with_fft_flavor = fftw3-mkl
with_fft_incs = -I${MKLROOT}/include
with_fft_libs = -L${MKLROOT}/lib/intel64 -Wl,--start-group  -lmkl_intel_lp64 -lmkl_sequential -lmkl_core -Wl,--end-group -lpthread -lm -ldl

#-Wl,--start-group ${MKLROOT}/lib/intel64/libmkl_intel_lp64.a ${MKLROOT}/lib/intel64/libmkl_intel_thread.a ${MKLROOT}/lib/intel64/libmkl_core.a -Wl,--end-group -liomp5 -lpthread -lm -ldl

#with_linalg_flavor = custom
#with_linalg_libs = -L/usr/local/OpenBLAS/lib -lopenblas -lpthread
#with_fft_flavor = fftw3
#with_fft_incs = -I/usr/include
#with_fft_libs = -L/usr/lib64 -lfftw3 -lfftw3f

with_trio_flavor = netcdf+psml
with_netcdf_incs = -I${FALLBACKS_PATH}/netcdf4/4.4.1.1/include -I${FALLBACKS_PATH}/netcdf4_fortran/4.4.4/include
with_netcdf_libs = -L${FALLBACKS_PATH}/netcdf4_fortran/4.4.4/lib -lnetcdff -L${FALLBACKS_PATH}/netcdf4/4.4.1.1/lib -lnetcdf
with_psml_incs = -I${FALLBACKS_PATH}/xmlf90/1.5.3.1/include -I${FALLBACKS_PATH}/libpsml/1.1.7/include
with_psml_libs = -L${FALLBACKS_PATH}/libpsml/1.1.7/lib -lpsml -L${FALLBACKS_PATH}/xmlf90/1.5.3.1/lib -lxmlf90

with_dft_flavor = atompaw+libxc+wannier90
with_atompaw_bins = ${FALLBACKS_PATH}/atompaw/4.0.1.0/bin
with_atompaw_incs = -I${FALLBACKS_PATH}/atompaw/4.0.1.0/include
with_atompaw_libs = -L${FALLBACKS_PATH}/atompaw/4.0.1.0/lib -latompaw
with_libxc_incs = -I${FALLBACKS_PATH}/libxc/3.0.1/include
with_libxc_libs = -L${FALLBACKS_PATH}/libxc/3.0.1/lib -lxcf90 -lxc
with_wannier90_bins = ${FALLBACKS_PATH}/wannier90/2.0.1.1/bin
with_wannier90_incs = -I${FALLBACKS_PATH}/wannier90/2.0.1.1/include
with_wannier90_libs = -L${FALLBACKS_PATH}/wannier90/2.0.1.1/lib -lwannier90

#with_yaml_incs = -I/usr/include
#with_yaml_libs = -L/usr/lib64 -lyaml
#with_yaml_incs = -I${FALLBACKS_PATH}/yaml/0.1.6/include
#with_yaml_libs = -L${FALLBACKS_PATH}/yaml/0.1.6/lib -lyaml
#with_bigdft_incs = -I${FALLBACKS_PATH}/bigdft/1.7.1.24/include
#with_bigdft_libs = -L${FALLBACKS_PATH}/bigdft/1.7.1.24/lib -lbigdft-1 -labinit -lyaml -lrt

enable_gw_dpc = yes
enable_memory_profiling = no
enable_maintainer_checks = no

status = certified

[buda2_gnu_8.1_openmpi]
enable_mpi = yes
enable_mpi_io = yes
with_mpi_prefix = ${MPIHOME}
with_trio_flavor = netcdf

with_fft_flavor = fftw3-mkl
with_fft_libs = -L${MKLROOT}/lib/intel64 -Wl,--no-as-needed -lmkl_gf_lp64 -lmkl_sequential -lmkl_core -lpthread -lm -ldl
with_linalg_flavor = mkl
with_linalg_libs = -L${MKLROOT}/lib/intel64 -Wl,--no-as-needed -lmkl_gf_lp64 -lmkl_sequential -lmkl_core -lpthread -lm -ldl

with_dft_flavor = libxc
enable_gw_dpc = yes
enable_memory_profiling = no
enable_maintainer_checks = no

status = certified
